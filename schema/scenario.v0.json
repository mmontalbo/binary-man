{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "schema/scenario.v0.json",
  "title": "Scenario v0",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "scenario_id",
    "rationale",
    "binary",
    "args",
    "fixture",
    "limits",
    "artifacts"
  ],
  "properties": {
    "scenario_id": {
      "type": "string",
      "minLength": 1
    },
    "rationale": {
      "type": "string",
      "minLength": 1,
      "maxLength": 1024
    },
    "binary": {
      "type": "object",
      "additionalProperties": false,
      "required": ["path"],
      "properties": {
        "path": {
          "type": "string",
          "minLength": 1
        }
      }
    },
    "args": {
      "type": "array",
      "items": {
        "type": "string",
        "maxLength": 4096
      },
      "maxItems": 256
    },
    "fixture": {
      "type": "object",
      "additionalProperties": false,
      "required": ["id"],
      "properties": {
        "id": {
          "type": "string",
          "minLength": 1
        }
      }
    },
    "limits": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "wall_time_ms",
        "cpu_time_ms",
        "memory_kb",
        "file_size_kb"
      ],
      "properties": {
        "wall_time_ms": {
          "type": "integer",
          "minimum": 1,
          "maximum": 60000
        },
        "cpu_time_ms": {
          "type": "integer",
          "minimum": 1,
          "maximum": 30000
        },
        "memory_kb": {
          "type": "integer",
          "minimum": 1,
          "maximum": 262144
        },
        "file_size_kb": {
          "type": "integer",
          "minimum": 1,
          "maximum": 10240
        }
      }
    },
    "artifacts": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "capture_stdout",
        "capture_stderr",
        "capture_exit_code"
      ],
      "properties": {
        "capture_stdout": {
          "type": "boolean"
        },
        "capture_stderr": {
          "type": "boolean"
        },
        "capture_exit_code": {
          "const": true
        }
      }
    }
  }
}
